CREATE TABLE "BILLING"."INVOICES" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 68 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"SUPPLIER_ID" NUMBER NOT NULL ENABLE, 
	"PERIODIC_INVOICE_ID" NUMBER, 
	"ERP_IV_NUM" VARCHAR2(50 CHAR), 
	"SUPPLIER_IV_NUM" VARCHAR2(50 CHAR) NOT NULL ENABLE, 
	"DESCRIPTION" VARCHAR2(255 CHAR) NOT NULL ENABLE, 
	"INVOICE_DATE" DATE NOT NULL ENABLE, 
	"NOTES" VARCHAR2(2000 CHAR), 
	"STATUS_ID" NUMBER NOT NULL ENABLE, 
	"REFERENCE_INVOICE_ID" NUMBER, 
	"ROW_VERSION" NUMBER(*,0) NOT NULL ENABLE, 
	"CREATED" DATE NOT NULL ENABLE, 
	"CREATED_BY" VARCHAR2(255 CHAR) NOT NULL ENABLE, 
	"UPDATED" DATE NOT NULL ENABLE, 
	"UPDATED_BY" VARCHAR2(255 CHAR) NOT NULL ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "APEX_7944359602492022" ;
ALTER TABLE "BILLING"."INVOICES" ADD CONSTRAINT "INVOICES_ID_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "APEX_7944359602492022"  ENABLE;
ALTER TABLE "BILLING"."INVOICES" ADD CONSTRAINT "INVOICES_UNQ1" UNIQUE ("SUPPLIER_ID", "SUPPLIER_IV_NUM")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "APEX_7944359602492022"  ENABLE;
ALTER TABLE "BILLING"."INVOICES" ADD CONSTRAINT "INVOICES_SUPPLIER_ID_FK" FOREIGN KEY ("SUPPLIER_ID")
	  REFERENCES "BILLING"."SUPPLIERS" ("ID") ENABLE;
ALTER TABLE "BILLING"."INVOICES" ADD CONSTRAINT "INVOICES_PERIODIC_INVOICE_ID_FK" FOREIGN KEY ("PERIODIC_INVOICE_ID")
	  REFERENCES "BILLING"."PERIODIC_INVOICES" ("ID") ENABLE;
ALTER TABLE "BILLING"."INVOICES" ADD CONSTRAINT "INVOICES_STATUS_ID_FK" FOREIGN KEY ("STATUS_ID")
	  REFERENCES "BILLING"."INVOICE_STATUSES" ("ID") ENABLE;

  CREATE INDEX "BILLING"."INVOICES_I2" ON "BILLING"."INVOICES" ("SUPPLIER_IV_NUM") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "APEX_7944359602492022" ;

  CREATE INDEX "BILLING"."INVOICES_I1" ON "BILLING"."INVOICES" ("ERP_IV_NUM") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "APEX_7944359602492022" ;

  CREATE INDEX "BILLING"."INVOICES_I3" ON "BILLING"."INVOICES" ("INVOICE_DATE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "APEX_7944359602492022" ;

  CREATE OR REPLACE EDITIONABLE TRIGGER "BILLING"."INVOICES_BIU" before 
        insert or 
                update on invoices for each row 
        begin 
                if inserting then 
                        :new.row_version := 1; 
                elsif updating then 
                        :new.row_version := nvl(:old.row_version, 0) + 1; 
                end if; 
 
                if inserting then 
                        :new.created := sysdate; 
                        :new.created_by := coalesce(sys_context('apex$session', 'app_user'), user); 
                end if; 
 
                :new.updated := sysdate; 
                :new.updated_by := coalesce(sys_context('apex$session', 'app_user'), user); 
        end invoices_biu; 

/
ALTER TRIGGER "BILLING"."INVOICES_BIU" ENABLE;